---
title: "\U0001F4CA Distributions"
subtitle: "Distributions"
author: "Arvind Venkatadri"
date: "`r Sys.Date()`"
weight: 20
summary: "Quant Variable Graphs and their Siblings"
tags:
- Qual Variables and Quant Variables
- Bar and Column Charts
- Histograms and Density Plots
- Box Plots

image:
  caption: Photo by rawpixel on Unsplash
  focal_point: Smart
external_link: ""
links:
# - icon: lemon
#   icon_pack: fa
#   name: Orange Workflow
#   url: "/labs/Data-Analytics/distribution.ows"
# - icon: file-code
#   icon_pack: fa
#   name: Rmarkdown code
#   url: "labs/Data-Analytics/distributions.Rmd"
# - icon: cubes
#   icon_pack: fa
#   name: Radiant Workflow
#   url: "labs/Data-Analytics/distributions.Rmd"
slides: ""
url_code: "/files/distributions.html"
url_pdf: ""
url_slides: ""
url_video: ""
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(fontawesome)
library(blogdown)
library(tidyverse)
library(mosaic)
library(downloadthis)
library(palmerpenguins)
library(patchwork)
# #remotes::install_github("R-CoderDotCom/ridgeline@main")
# library(ridgeline)
library(ggridges)

```

## What graphs will we see today?

Some of the very basic and commonly used plots for data are:  
- Bar and Column Charts  
- Histograms and Frequency Distributions  
- Box Plots  
- 2D Hexbins Plots and 2D Frequency Distributions  
- Ridge Plots ( Quant + Qual variables)  

`r blogdown::shortcode("youtube", "Xm0PPtci3JE")`

## Histograms and Frequency Distributions

Histograms are best to show the distribution of raw *quantitative data*, by displaying the number of values that fall within defined ranges, often called *buckets* or *bins*. 

Although histograms may look similar to column charts, the two are different. First, histograms show *continuous data*, and usually you can adjust the bucket ranges to explore frequency patterns. For example, you can shift histogram buckets from 0-1, 1-2, 2-3, etc. to 0-2, 2-4, etc. 
By contrast, column charts show *categorical data*, such as the number of apples, bananas, carrots, etc. Second, histograms do not usually show spaces between buckets because these are *continuous values*, while column charts show spaces to separate each *category*. 


Let us listen to the late great Hans Rosling from the [Gapminder Project](https://www.gapminder.org), which aims at telling stories of the world with data, to remove systemic biases about poverty, income and gender related issues.


<iframe src="https://player.vimeo.com/video/127511255?h=a225cf98cc" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
<p><a href="https://vimeo.com/127511255">How many are rich and how many are poor?</a> from <a href="https://vimeo.com/gapminder">Gapminder</a> on <a href="https://vimeo.com">Vimeo</a>.</p>

<p align="center"><iframe src="//www.gapminder.org/tools/?embedded=true#$model$markers$mountain$encoding$frame$speed:187;;;;;&chart-type=mountain&url=v1" style="width: 100%; height: 500px; margin: 0 0 0 0; border: 1px solid grey;"allowfullscreen></iframe></p>

## Examine the Data
Let us look at the popular `mpg` dataset ( from R ) using `mosaic::inspect()`. We get two new pieces of output (i.e. two new dataframes), *describing* the Qual and Quant variables separately: 

```{r mpg-inspect-1}
inspect(mpg)
```
We can save and see the outputs separately: (code not run)

```{r mpg-inspect-2, eval=FALSE}

mpg_describe <- inspect(mpg)

mpg_describe$categorical
mpg_describe$quantitative

```

There is a lot of Description generated by the `mosaic::inspect()` command ! 
What can we say about the dataset and its variables? How big is the dataset? How many variables? What types are they, Quant or Qual? If they are Qual, what are the *levels*? Are they *ordered* levels? Discuss!


## Some Sample Charts for Quant Data Distributions

```{r charts, warning=FALSE,message=FALSE}
# library(tidyverse)
# library(patchwork)
# library(ggridges)

mpg <- mpg %>% mutate(drv= as_factor(drv))
p <- ggplot(mpg, alpha = 0.3) 
p1 <- p + geom_histogram(aes(x = hwy, fill = drv)) + labs(title = "Histogram")
p2 <- p + geom_density(aes(x = hwy, fill = drv))+ labs(title = "Frequency Density")
p3 <- p + geom_boxplot(aes(x = drv, y = hwy, fill = drv))+ labs(title = "Boxplot")
p4 <- p + geom_violin(aes(x = drv, y = hwy, fill = drv))+ labs(title = "Violin")

(p1+p3)/(p2+p4) + plot_layout(nrow = 3) + plot_annotation(title = "Single Quant Variable",subtitle = "And one Qual Variable too", tag_levels = 'A') & theme_minimal()

```

```{r more-charts, echo=FALSE, warning=FALSE,message=FALSE}
mpg <- mpg %>% mutate(drv= as_factor(drv))

p5 <- p + geom_density_ridges(aes(x = hwy, y = drv, fill = drv), alpha = 0.3, rel_min_height = 0.005) +
  scale_y_discrete(expand = c(0.01, 0)) +
  scale_x_continuous(expand = c(0.01, 0)) +
  theme_ridges() + labs(title = "Ridge Plot")

p7 <- p + geom_hex(aes(x = hwy, y = cty, fill = drv))+ labs(title = "Hex Bin Plot")
p8 <- p + geom_density_2d(aes(x = hwy, y = cty))+ labs(title = "2D Density Plot")

(p7 + p8) / p5 + plot_layout(guides = 'keep') + 
  plot_annotation(title = "Two Quant Variables",subtitle = "And one Qual Variable too", tag_levels = 'A') & theme_minimal()

```

## A Workflow in Orange

How does one visualize Distributions in Orange?
```{r}
blogdown::shortcode("youtube", "kKg22hjgFBI")
```

Download the Orange Workflow file by clicking the icon below, and open it in Orange.

```{r, echo=FALSE}
download_file(
  path = "files/distributions.ows",
  output_extension = ".ows",
  output_name = "Orange Workflow",
  button_label = "Download Orange Workflow",
  button_type = "danger",
  has_icon = TRUE,
  icon = "fa fa-save",
  self_contained = FALSE
)
```


## A Workflow in Radiant

Download the Radiant Workflow statefile by clicking the icon above, and upload/open it in Radiant. You need to start radiant from the `Add-In` menu in RStudio.

```{r, echo=FALSE}
download_file(
  path = "files/distributions.rda",
  output_extension = ".rda",
  output_name = "radiant-distributions",
  button_label = "Download Radiant Workflow",
  button_type = "danger",
  has_icon = TRUE,
  icon = "fa fa-save",
  self_contained = FALSE
)
```

## A Workflow in R

Download the RMarkdown tutorial file by clicking the icon above and open it in RStudio or rstudio.cloud.

```{r, echo=FALSE}
download_file(
  path = "files/distributions.Rmd",
  output_extension = ".Rmd",
  output_name = "distributions",
  button_label = "Download RMArkdown Workflow",
  button_type = "danger",
  has_icon = TRUE,
  icon = "fa fa-save",
  self_contained = FALSE
)
```

## Conclusion

- Histograms, Frequency Distributions,  and Box Plots are used for Quantitative data variables
- Histograms "dwell upon" **counts**, **ranges**, **means** and **standard deviations** 
- Frequency Density plots "dwell upon" **probabilities** and **densities**
- Box Plots "dwell upon" **medians** and **Quartiles**
- Qualitative data variables can be plotted as **counts**, using Bar Charts, or using Heat Maps
- 2D density plots are used for describing *two quant* variables*
- Ridge Plots are **density plots** used for describing one Quant and one Qual variable (by inherent splitting)
- We can split all these plots on the basis of another Qualitative variable.(Ridge Plots are already split)


## Your Turn

1. Try one of these datasets (download and unzip this file)  

```{r,echo=FALSE}
download_file(path = "files/data/qdd-data.zip",
              output_name = "qdd-data",
              button_label = "Download .zip file of data",
              button_type = "danger",
              has_icon = TRUE,
              icon = "fa fa-save",
              self_contained = FALSE)

```


1. A dataset from calmcode.io <https://calmcode.io/datasets.html>  
1. Old Faithful Data in R

`inspect` the dataset in each case and develop a set of Questions, that can be answered by appropriate stat measures, or by using a chart to show the distribution.

## References

1. See the scrolly animation for a histogram at this website: **Exploring Histograms, an essay by Aran Lunzer and Amelia McNamara**
<https://tinlizzie.org/histograms/?s=09>

1. Minimal R using `mosaic`. <https://cran.r-project.org/web/packages/mosaic/vignettes/MinimalRgg.pdf>

