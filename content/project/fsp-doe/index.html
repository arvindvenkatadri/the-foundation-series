---
title: "A Design Of Experiments Class"
author: "Arvind Venkatadri"
date: "2022-01-30"
output: html_document
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This project is a quick analysis of the Design of Experiments class carried out in the Order and Chaos course, FSP-2021-2022, SMI MAHE, Bangalore.</p>
<p>The methodology followed was that in A.J. Lawrance’s paper [^1] describing a Statistics module based on the method of Design of Experiments. The inquiry relates to Short Term Memory (STM) among students.</p>
</div>
<div id="structure" class="section level2">
<h2>Structure</h2>
<p>The total number of students were 17.
Eight Pairs of students were created randomly to create eight different Test tools for Short Term Memory testing.</p>
<p>The binary ( two - level ) variables/parameters that were used in the tests, were, following Lawrance:</p>
<ul>
<li>WL: Word List Length ( 7 and 15 words )<br />
</li>
<li>SL: Syllables in the Words ( 2 and 5 syllables )<br />
</li>
<li>ST: Study Time allowed for the Respondents ( 15 and 30 seconds )</li>
</ul>
<p>Other parameters considered were a) Language b) Structure/Depiction of the Word Lists ( e.g. word clouds, matrices, columns…), c) Whether the words would be shown or read aloud, and d) whether the respondents had to speak out, or write down, the recollected words. These parameters were discussed and abandoned as too complex to mechanize, though they could have had an impact on the STM scores.</p>
<p>Hence a total of <strong>8 Tests</strong> were created by 8 pairs of students, and each team tested the remaining 15 students ( Due to COVID restrictions, this testing was carried out entirely online on MS Teams, using individual breakout rooms for the Test Teams. )</p>
<p>The data were entered into a Google Sheet and the STM scores were converted to <em>percentages</em> so as to be comparable across WL.</p>
<p>The data was then “flattened” for each of the binary parameters; this was logical to do since for each parameter, the other two parameters were balanced out by the Test structure. For instance, for WL = 5, the SL and ST parameters used all the four combinations ( SL = 5, 15 ) and (ST = 15, 30 ). Hence the “common sense” analysis could proceed for each of the parameters individually. Joint effects were not considered for this preliminary class.</p>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<pre class="r"><code>stm &lt;- readxl::read_xlsx(&quot;Random Testers.xlsx&quot;,
                         sheet = &quot;Data&quot;,
                         range = &quot;C31:H91&quot;) %&gt;% 
  janitor::clean_names()
stm</code></pre>
<pre><code>## # A tibble: 60 x 6
##    syllable_2 syllable_5 study_time_15 study_time_30 list_length_7
##         &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
##  1      0.714      0.571         0.714         0.714         0.714
##  2      0.429      0.571         0.429         0.571         0.429
##  3      0.571      0.714         0.571         0.571         0.571
##  4      0.714      1             0.714         0.571         0.714
##  5      0.714      1             0.714         1             0.714
##  6      0.714      0.857         0.714         0.714         0.714
##  7      0.571      0.571         0.571         0.571         0.571
##  8      0.571      0.714         0.571         0.571         0.571
##  9      0.571      0.857         0.571         1             0.571
## 10      0.571      1             0.571         0.429         0.571
## # ... with 50 more rows, and 1 more variable: list_length_15 &lt;dbl&gt;</code></pre>
</div>
<div id="basic-plots" class="section level2">
<h2>Basic Plots</h2>
<p>We will use Box Plots to compare the STM score distributions for each Parameter. To do this we need to <code>pivot_long</code> the adjacent columns ( e.g. <code>syllable_2</code> and syllable_5) and use these names as categorical variables:</p>
<div id="syllable-parameter-sl" class="section level3">
<h3>Syllable Parameter SL</h3>
<pre class="r"><code>stm_syllable &lt;- stm %&gt;%
  select(contains(&quot;syllable&quot;)) %&gt;%
  pivot_longer(
    data = .,
    cols = starts_with(&quot;syllable&quot;),
    names_to = &quot;syllable&quot;,
    values_to = &quot;syl_scores&quot;
  )
stm_syllable</code></pre>
<pre><code>## # A tibble: 120 x 2
##    syllable   syl_scores
##    &lt;chr&gt;           &lt;dbl&gt;
##  1 syllable_2      0.714
##  2 syllable_5      0.571
##  3 syllable_2      0.429
##  4 syllable_5      0.571
##  5 syllable_2      0.571
##  6 syllable_5      0.714
##  7 syllable_2      0.714
##  8 syllable_5      1    
##  9 syllable_2      0.714
## 10 syllable_5      1    
## # ... with 110 more rows</code></pre>
<pre class="r"><code>p1 &lt;- stm_syllable %&gt;%
  ggplot(.) + geom_boxplot(aes(
    y = syl_scores,
    x = syllable,
    colour = syllable,
    fill = syllable
  ),
  alpha = 0.3) +
  labs(title = &quot;STM scores by Syllables in Test Word Lists&quot;)

p2 &lt;- stm_syllable %&gt;%
  ggplot(.) + geom_density(aes(x = syl_scores, colour = syllable, fill = syllable), alpha = 0.3) +
  labs(title = &quot;STM scores by Syllables in Test Word Lists&quot;)

patchwork::wrap_plots(p1 + p2, guides = &quot;collect&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/plots-1-1.png" width="672" /></p>
</div>
<div id="study-time-parameter-st" class="section level3">
<h3>Study Time Parameter ST</h3>
<pre class="r"><code>stm_studytime &lt;- stm %&gt;%
  select(contains(&quot;study&quot;)) %&gt;%
  pivot_longer(
    data = .,
    cols = starts_with(&quot;study&quot;),
    names_to = &quot;study&quot;,
    values_to = &quot;study_scores&quot;
  )
stm_studytime</code></pre>
<pre><code>## # A tibble: 120 x 2
##    study         study_scores
##    &lt;chr&gt;                &lt;dbl&gt;
##  1 study_time_15        0.714
##  2 study_time_30        0.714
##  3 study_time_15        0.429
##  4 study_time_30        0.571
##  5 study_time_15        0.571
##  6 study_time_30        0.571
##  7 study_time_15        0.714
##  8 study_time_30        0.571
##  9 study_time_15        0.714
## 10 study_time_30        1    
## # ... with 110 more rows</code></pre>
<pre class="r"><code>p1 &lt;- stm_studytime %&gt;%
  ggplot(.) + geom_boxplot(aes(
    y = study_scores,
    x = study,
    colour = study,
    fill = study
  ),
  alpha = 0.3,
  ) +
  labs(title = &quot;STM scores by Study Time in Test Word Lists&quot;)
p2 &lt;- stm_studytime %&gt;%
  ggplot(.) + geom_density(aes(x = study_scores, colour = study, fill = study), alpha = 0.3) +
  labs(title = &quot;STM scores by Study Time in Test Word Lists&quot;)

patchwork::wrap_plots(p1 + p2, guides = &quot;collect&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/plots-2-1.png" width="672" /></p>
</div>
<div id="word-list-length-parameter-wl" class="section level3">
<h3>Word List Length Parameter WL</h3>
<pre class="r"><code>stm_words &lt;- stm %&gt;% 
  select(contains(&quot;list&quot;)) %&gt;% 
  pivot_longer(data = ., cols = starts_with(&quot;list&quot;), 
               names_to = &quot;list&quot;, values_to = &quot;list_scores&quot;)
stm_words</code></pre>
<pre><code>## # A tibble: 120 x 2
##    list           list_scores
##    &lt;chr&gt;                &lt;dbl&gt;
##  1 list_length_7       0.714 
##  2 list_length_15      0.267 
##  3 list_length_7       0.429 
##  4 list_length_15      0.2   
##  5 list_length_7       0.571 
##  6 list_length_15      0.0667
##  7 list_length_7       0.714 
##  8 list_length_15      0.133 
##  9 list_length_7       0.714 
## 10 list_length_15      0.2   
## # ... with 110 more rows</code></pre>
<pre class="r"><code>p1 &lt;- stm_words %&gt;%
  ggplot(.) + geom_boxplot(aes(y = list_scores, x = list, colour = list, fill = list), alpha = 0.3) +
  labs(title = &quot;STM scores by Word Count in Test Word Lists&quot;)

p2 &lt;- stm_words %&gt;%
  ggplot(.) + geom_density(aes(x = list_scores, colour = list, fill = list), alpha = 0.3) +
  labs(title = &quot;STM scores by Study Time in Test Word Lists&quot;)

patchwork::wrap_plots(p1 + p2,guides = &quot;collect&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/plots-3-1.png" width="672" /></p>
</div>
</div>
<div id="preliminary-observations" class="section level2">
<h2>Preliminary Observations</h2>
<p>Clearly, based on visual inspection of the Plots, the Word Count seems to have a large effect on STM Test Scores, with fewer words ( 7 ) being easier to recall. Study Time ( 15 and 30 seconds ) also seems to have a more modest positive effect on STM scores, while Syllable Count ( 2 or 5 syllables ) seems to have a modest negative effect on STM scores.</p>
</div>
<div id="analysis" class="section level2">
<h2>Analysis</h2>
<p>We wish to establish the significance of the effect size due to each of the Parameters. Already from the Density Plots, we can see that <em>none</em> of the scores are normally distributed. A quick <em>Shapiro-Wilkes Test</em> for each of them confirms that the scores are <em>not</em> normally distributed.</p>
<p>Hence we go for a Permutation Test to check for significance of effect.</p>
<p>On the other hand, as remarked in [^2], the non-parametric permutation test can be both <em>exact</em> and also <strong>intuitively easier</strong> for students to grasp, as I can testify from direct observation in this class. There is no need to discuss sampling distributions and means, t-tests and the like. Permutations are easily executed in R, using packages such as <code>mosaic</code> [^3].</p>
<pre class="r"><code>shapiro.test(stm$syllable_2)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  stm$syllable_2
## W = 0.95508, p-value = 0.02716</code></pre>
<pre class="r"><code>shapiro.test(stm$syllable_5)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  stm$syllable_5
## W = 0.95321, p-value = 0.02211</code></pre>
<pre class="r"><code>shapiro.test(stm$study_time_15)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  stm$study_time_15
## W = 0.9068, p-value = 0.0002348</code></pre>
<pre class="r"><code>shapiro.test(stm$study_time_30)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  stm$study_time_30
## W = 0.95539, p-value = 0.0281</code></pre>
<pre class="r"><code>shapiro.test(stm$list_length_7)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  stm$list_length_7
## W = 0.90542, p-value = 0.0002085</code></pre>
<pre class="r"><code>shapiro.test(stm$list_length_15)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  stm$list_length_15
## W = 0.92806, p-value = 0.001645</code></pre>
</div>
<div id="a-permutation-test" class="section level2">
<h2>A Permutation Test</h2>
<p>We proceed with a Permutation Test for each of the Parameters.
We start with the Syllable Parameter SL. We shuffle the labels ( SL- = 2 and SL+ = 5) between the scores and determine the null distribution. This is then compared with the difference in <em>mean scores</em> between the unpermuted sets.
We continue similarly for the other two parameters.</p>
<pre class="r"><code>#Syllable Parameter SL

obs_syl_mean &lt;- mean(stm$syllable_2) - mean(stm$syllable_5)
obs_syl_mean</code></pre>
<pre><code>## [1] 0.0153731</code></pre>
<pre class="r"><code>null_dist_syllable &lt;-
  do(10000) * diff(mean(
    stm_syllable$syl_scores ~ shuffle(stm_syllable$syllable),
    data = stm_syllable
  ))
head(null_dist_syllable)</code></pre>
<pre><code>##    syllable_5
## 1 -0.03305929
## 2 -0.04634865
## 3  0.06982310
## 4  0.07133897
## 5  0.02121690
## 6 -0.06705135</code></pre>
<pre class="r"><code>p1 &lt;-
  null_dist_syllable %&gt;% 
  ggplot(., aes(x = syllable_5)) + 
  geom_histogram(aes(fill = syllable_5 &gt;= obs_syl_mean)) +
  labs(x = &quot;Distribution of Diff in Means under null hypothesis for Syllables&quot;)


# Study Time Parameter ST
obs_study_mean &lt;- mean(stm$study_time_30) - mean(stm$study_time_15)
obs_study_mean</code></pre>
<pre><code>## [1] 0.08526183</code></pre>
<pre class="r"><code>null_dist_studytime &lt;-
  do(10000) * diff(mean(
    stm_studytime$study_scores ~ shuffle(stm_studytime$study),
    data = stm_studytime
  ))
head(null_dist_studytime)</code></pre>
<pre><code>##   study_time_30
## 1  -0.003535476
## 2   0.026671984
## 3   0.013381508
## 4   0.013331667
## 5   0.017792619
## 6   0.020929444</code></pre>
<pre class="r"><code>p2 &lt;- null_dist_studytime %&gt;%
  ggplot(., aes(x = study_time_30)) + 
  geom_histogram(aes(fill = study_time_30 &gt;= obs_study_mean)) +
  labs(x = &quot;Distribution of Diff in Means under null hypothesis for Study Time&quot;)

# Word List Length Parameter WL
obs_word_mean &lt;- mean(stm$list_length_7) - mean(stm$list_length_15)
obs_word_mean</code></pre>
<pre><code>## [1] 0.2887539</code></pre>
<pre class="r"><code>null_dist_words &lt;-
  do(10000) * diff(mean(stm_words$list_scores ~ shuffle(stm_words$list), data = stm_words))
head(null_dist_words)</code></pre>
<pre><code>##   list_length_7
## 1  -0.041308175
## 2  -0.053993730
## 3  -0.004443889
## 4   0.013068810
## 5  -0.053388810
## 6  -0.003475000</code></pre>
<pre class="r"><code>p3 &lt;-
  null_dist_words %&gt;% 
  ggplot(., aes(x = list_length_7)) + 
  geom_histogram(aes(fill = list_length_7 &gt;= obs_word_mean)) +
  labs(x = &quot;Distribution of Diff in Means under null hypothesis for Words&quot;)</code></pre>
<pre class="r"><code># patchwork::wrap_plots(p1 + p2 + p3, nrow= 3, guides = &quot;auto&quot;)
p1</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/null-plots-1.png" width="672" /></p>
<pre class="r"><code>p2</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/null-plots-2.png" width="672" /></p>
<pre class="r"><code>p3</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/null-plots-3.png" width="672" /></p>
</div>
<div id="conclusions" class="section level2">
<h2>Conclusions</h2>
<p>From the above null distribution plots obtained using Permutation tests, it is clear that both Study Time ( ST ) and List Word Length ( WL) have significant effects on the Short Term Memory Scores.
On the other hand, Syllable Count (SL) does not seem to affect the STM scores significantly.</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>[^1]. Lawrance, A. J. 1996. “A Design of Experiments Workshop as an Introduction to Statistics.” American Statistician 50 (2): 156–58. <a href="doi:10.1080/00031305.1996.10474364" class="uri">doi:10.1080/00031305.1996.10474364</a>.</p>
<p>[^2]. Ernst, Michael D. 2004. “Permutation Methods: A Basis for Exact Inference.” Statistical Science 19 (4): 676–85. <a href="doi:10.1214/088342304000000396" class="uri">doi:10.1214/088342304000000396</a>.</p>
<p>[^3]. Pruim R, Kaplan DT, Horton NJ (2017). “The mosaic Package: Helping Students to ‘Think with Data’ Using R.” The R Journal, 9(1), 77–102. <a href="https://journal.r-project.org/archive/2017/RJ-2017-024/index.html" class="uri">https://journal.r-project.org/archive/2017/RJ-2017-024/index.html</a>.</p>
</div>
